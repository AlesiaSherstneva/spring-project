# suppress inspection "SpringBootApplicationProperties" for whole file
# H2 Test Datasource
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=root
spring.datasource.password=password123
spring.sql.init.mode=always
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
server.servlet.encoding.charset=UTF-8

# SQL scripts
sql.script.create.table.person=CREATE TABLE IF NOT EXISTS Person \
  (id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\
  name VARCHAR(250) UNIQUE,\
  year INT NOT NULL CHECK (year > 1900 AND year <= EXTRACT(year FROM now())))
sql.script.create.table.book=CREATE TABLE IF NOT EXISTS Book \
  (id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\
  person_id INT REFERENCES Person(id) ON DELETE SET NULL,\
  title VARCHAR(100) NOT NULL,\
  author VARCHAR(250) NOT NULL,\
  year INT NOT NULL CHECK (year > 1445 AND year <= EXTRACT(year FROM now())),\
  taken_at TIMESTAMP)
sql.script.add.people=INSERT INTO person(name, year) \
  VALUES ('\u041F\u0435\u0440\u0432\u044B\u0439 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0427\u0438\u0442\u0430\u0442\u0435\u043B\u044C', 1990), ('\u0412\u0442\u043E\u0440\u043E\u0439 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0427\u0438\u0442\u0430\u0442\u0435\u043B\u044C', 1975), ('\u0422\u0440\u0435\u0442\u0438\u0439 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0427\u0438\u0442\u0430\u0442\u0435\u043B\u044C', 2004)
sql.script.add.books=INSERT INTO book(person_id, title, author, year, taken_at) \
  VALUES (null, '\u041F\u0435\u0440\u0432\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435', '\u041F\u0435\u0440\u0432\u044B\u0439 \u0410\u0432\u0442\u043E\u0440', 2011, null), \
  (1, '\u0412\u0442\u043E\u0440\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435', '\u0412\u0442\u043E\u0440\u043E\u0439 \u0410\u0432\u0442\u043E\u0440', 1983, '2022-06-30')
sql.script.drop.table.book=DROP TABLE IF EXISTS book
sql.script.drop.table.person=DROP TABLE IF EXISTS person